{% extends "auctions/layout.html" %}

{% block title %}
    All Listings
{% endblock %}

{% block navbar %}
    <li class="nav-item">
        <a class="nav-link" href="{% url 'index' %}">Active Listings</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'create' %}">Create Listing</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'watchlist' %}">Watchlist</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'categories' %}">All Categories</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'profile' user.id %}">My Yard</a>
    </li>
{% endblock %}

{% block body %}
<div class="page-content">
    <h1 class="page-heading-h1">All Listings</h1>
    <p></p>

    <h3 class="active-listings-heading">Active Listings</h3>
    <ul>
        {% for listing in listings %}
            {% if listing.active == True %}
                <li class="li-listing">
                    <div class="thumb-title-div">
                        {% if listing.image != "" %}
                        <div class="thumb-div">
                            <img src="{{ listing.image }}" height="120">
                        </div>
                        {% endif %}
                        <div class="list-desc-div">
                            <a class="big-a bold" href="{% url 'listing' listing.id %}">{{ listing.title }}</a>
                            <p>
                                <span class="bold">Current Bid:</span> {{ listing.price }}</br>
                                <span class="bold">Description:</span> {{ listing.description }}</br>
                                <span class="bold">Seller:</span> <a class="small-a" href="{% url 'profile' listing.user.id %}">{{ listing.user.username }}</a> 
                            </p>    
                        </div>

                    </div>

                </li>
                <hr>
            </br>
            {% endif %}
        {% endfor %}
    </ul>
    <h3 class="page-heading-h3">Closed Listings</h3>
    <ul>
        {% for listing in listings %}
            {% if listing.active == False %}
                <li class="li-listing">
                    <div class="thumb-title-div">
                        {% if listing.image != "" %}
                        <div class="thumb-div">
                            <img src="{{ listing.image }}" height="120">
                        </div>
                        {% endif %}
                        <div class="list-desc-div">
                            <a class="big-a bold" href="{% url 'listing' listing.id %}">{{ listing.title }}</a>
                            <p>
                                <span class="bold">Final Bid:</span> {{ listing.price }}</br>
                                <span class="bold">Winner:</span> {% for winner in winners %}
                                            {% if winner.listing == listing %}
                                                {{ winner.user.username }}</br>
                                            {% endif %}
                                        {% endfor %}
                                <span class="bold">Seller:</span> <a class="small-a" href="{% url 'profile' listing.user.id %}">{{ listing.user.username }}</a>
                            </p>   
                        </div>
                    </div>
                </li>
                <hr>
            </br>
            {% endif %}
        {% endfor %}
    </ul>
</div>
{% endblock %}