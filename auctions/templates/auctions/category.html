{% extends "auctions/layout.html" %} 
{% block title %} Category: {{ category }} {% endblock %} 
{% block navbar %}
<li class="nav-item">
  <a class="nav-link" href="{% url 'index' %}">Active Listings</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="{% url 'listings' %}">All Listings</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="{% url 'create' %}">Create Listing</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="{% url 'watchlist' %}">Watchlist</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="{% url 'categories' %}">All Categories</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="{% url 'messages' current_user.id %}">Messages</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="{% url 'profile' current_user.id %}">My Yard</a>
</li>

{% endblock %} 
{% block body %}
<div class="category-content">
  <h1>{{ category.category }}</h1>
  <h6>{{ category.description }}</h6>
  {% if not listings %}
  <p>No listings in this category.</p>
  {% endif %}
  <ul>
    {% for listing in listings %}
    <li>
      <a class="title-link" href="{% url 'listing' listing.id %}"
        >{{ listing.title }}</a
      >
      <p class="listing-desc hidden">
        {{ listing.title }} - {{ listing.description|truncatechars:125 }} - ${{listing.price }}
      </p>
    </li>
    {% endfor %}
  </ul>
</div>

<script>
  document.querySelectorAll(".title-link").forEach((link) => {
    link.addEventListener("mouseover", () => {
      link.nextElementSibling.classList.toggle("hidden");
      link.nextElementSibling.classList.toggle("visible-desc");
      
    });
    link.addEventListener("mouseout", () => {
      link.nextElementSibling.classList.toggle("hidden");
      link.nextElementSibling.classList.toggle("visible-desc");
    });
  });
</script>
{% endblock %}
