{% extends "auctions/layout.html" %}

{% load tz %}

{% block title %}
    
{% endblock %}

{% block navbar %}
    <li class="nav-item">
        <a class="nav-link" href="{% url 'index' %}">Active Listings</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'listings' %}">All Listings</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'create' %}">Create Listing</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'watchlist' %}">Watchlist</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'categories' %}">All Categories</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'profile' user.id %}">My Yard</a>
    </li>
{% endblock %}


{% block body %}

<div class="page-content">
    <h2>{{ user.username }}'s Messages</h2>
    <div class="messages-container">
        {% if messages %}
            <h3>Messages</h3>
            <hr>
            {% for message in messages %}
                <div class="message inbox">
                    {% if message.recipient == user %}
                        <p class="message-sender">From: {{ message.sender }}</p>
                        <p class="message-date">Date: {{ message.date_sent|date:"F j, Y, g:i a" }}</p>
                        <p class="message-subject">Subject: {{ message.subject }}</p>
                        <p class="message-content">{{ message.message }}</p>
                    {% elif message.sender == user %}
                        <p class="message-recipient">To: {{ message.recipient }}</p>
                        <p class="message-date">Date: {{ message.date_sent|date:"F j, Y, g:i a" }}</p>
                        <p class="message-subject">Subject: {{ message.subject }}</p>
                        <p class="message-content">{{ message.message }}</p>
                    {% endif}
                    <hr>
                </div>
            {% endfor %}
        {% else %}
            <p>No messages</p>
        {% endif %}
    </div>
    <a href="{% url 'profile' user.id %}" class="btn btn-primary">Back to Profile</a>
</div>

{% endblock %}